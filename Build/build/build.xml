<?xml version="1.0"?>

<!-- ======================================================== -->
<!--              Master WONDER Ant build file                -->
<!-- Servers as a facade to other buildfiles.                 -->
<!-- "basedir" is wonder project directory, not "build" where -->
<!-- this files is located.                                   -->
<!-- ======================================================== -->
<project name="Wonder" default="all" basedir="../..">

    <import file="generic.xml" />
    <property name="wonder.patch" value="54" />

    <property name="frameworks.wonder.jars"  value="ERJars" />
    <property name="frameworks.wonder.core"  value="${frameworks.wonder.jars}/ERExtensions/JavaWOExtensions" />
    <property name="frameworks.wonder.d2w"   value="${frameworks.wonder.core}/ERDirectToWeb" />
    <property name="frameworks.wonder.logic" value="${frameworks.wonder.d2w}/ERPrototypes/ERCoreBusinessLogic" />
    <property name="frameworks.system.core" 
             value="JavaFoundation/JavaEOAccess/JavaEOControl/JavaWebObjects/JavaWOJSPServlet/JavaJDBCAdaptor/JavaXML/JavaDirectToWeb/JavaEOProject/JavaDTWGeneration" />
    <property name="frameworks.system.d2w" value="${frameworks.system.core}/JavaDirectToWeb/JavaEOProject/JavaDTWGeneration" />

    <property name="framework.erjars.commons.cli" value="commons-cli-1.2.jar" />
    <property name="framework.erjars.commons.codec" value="commons-codec-1.6.jar" />
    <property name="framework.erjars.commons.io" value="commons-io-2.2.jar" />
    <property name="framework.erjars.commons.lang" value="commons-lang-2.6.jar" />
    <property name="framework.erjars.httpclient" value="httpclient-4.3.1.jar" />
    <property name="framework.erjars.httpcore" value="httpcore-4.3.jar" />
    <property name="framework.erjars.icu4j" value="icu4j-3_8_1.jar" />
    <property name="framework.erjars.joda" value="joda-time-2.3.jar" />
    <property name="framework.erjars.junit" value="junit-4.10.jar" />
    <property name="framework.erjars.log4j" value="log4j-1.2.17.jar" />
    <property name="framework.erjars.ognl" value="ognl-2.6.7.jar" />
    <property name="framework.erjars.slf4j.api" value="slf4j-api-1.7.5.jar" />
    <property name="framework.erjars.slf4j.log4j12" value="slf4j-log4j12-1.7.5.jar" />

    <target name="ERJars.all">
        <fail message="Please check versions of jar files included in ERJars project. See properties in Build/build//build.xml.">
            <condition>
                <not>
                    <and>
                        <available file="Frameworks/Core/ERJars/Libraries/${framework.erjars.commons.cli}" />
                        <available file="Frameworks/Core/ERJars/Libraries/${framework.erjars.commons.codec}" />
                        <available file="Frameworks/Core/ERJars/Libraries/${framework.erjars.commons.io}" />
                        <available file="Frameworks/Core/ERJars/Libraries/${framework.erjars.commons.lang}" />
                        <available file="Frameworks/Core/ERJars/Libraries/${framework.erjars.httpclient}" />
                        <available file="Frameworks/Core/ERJars/Libraries/${framework.erjars.httpcore}" />
                        <available file="Frameworks/Core/ERJars/Libraries/${framework.erjars.icu4j}" />
                        <available file="Frameworks/Core/ERJars/Libraries/${framework.erjars.joda}" />
                        <available file="Frameworks/Core/ERJars/Libraries/${framework.erjars.junit}" />
                        <available file="Frameworks/Core/ERJars/Libraries/${framework.erjars.log4j}" />
                        <available file="Frameworks/Core/ERJars/Libraries/${framework.erjars.ognl}" />
                        <available file="Frameworks/Core/ERJars/Libraries/${framework.erjars.slf4j.api}" />
                        <available file="Frameworks/Core/ERJars/Libraries/${framework.erjars.slf4j.log4j12}" />
                    </and>
                </not>
            </condition>
        </fail>
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERJars" />
            <param name="project.dir" value="Frameworks/Core/ERJars" />
        </antcall>
    </target>

    <target name="EROraclePlugIn.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.oracle.EROraclePlugInPrincipal" />
            <param name="project.name" value="EROraclePlugIn" />
            <param name="project.dir" value="Frameworks/PlugIns/EROraclePlugIn" />
        </antcall>
    </target>

    <target name="WOOgnl.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="ognl.webobjects.WOOgnl" />
            <param name="project.name" value="WOOgnl" />
            <param name="project.dir" value="Frameworks/Core/WOOgnl" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.jars}" />
        </antcall>
    </target>

    <target name="JavaWOExtensions.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="JavaWOExtensions" />
            <param name="project.dir" value="Frameworks/Core/JavaWOExtensions" />
        </antcall>
    </target>

    <target name="ERCaptcha.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERCaptcha" />
            <param name="project.dir" value="Frameworks/Misc/ERCaptcha" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>

    <target name="ERProfiling.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERProfiling" />
            <param name="project.dir" value="Frameworks/Misc/ERProfiling" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>

    <target name="ERSelenium.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.selenium.ERSelenium" />
            <param name="project.name" value="ERSelenium" />
            <param name="project.dir" value="Frameworks/Misc/ERSelenium" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>

    <target name="ERRest.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERRest" />
            <param name="project.dir" value="Frameworks/EOF/ERRest" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>

    <target name="ERAttachment.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.attachment.ERAttachmentPrincipal" />
            <param name="project.name" value="ERAttachment" />
            <param name="project.dir" value="Frameworks/BusinessLogic/ERAttachment" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/Ajax" />
       </antcall>
    </target>

    <target name="ERMoviesLogic.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="webobjectsexamples.businesslogic.ERMoviesLogic" />
            <param name="project.name" value="ERMoviesLogic" />
            <param name="project.dir" value="Frameworks/BusinessLogic/ERMoviesLogic" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERAttachment/ERTaggable" />
       </antcall>
    </target>

    <target name="ERTaggable.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.taggable.ERTaggablePrincipal" />
            <param name="project.name" value="ERTaggable" />
            <param name="project.dir" value="Frameworks/BusinessLogic/ERTaggable" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>

    <target name="ERIUI.all">
        <antcall target="global.framework.${build.action}" >
          <param name="project.principal.class" value="er.iui.ERIUI" />
          <param name="project.name" value="ERIUI" />
          <param name="project.dir" value="Frameworks/Ajax/ERIUI" />
          <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/Ajax" />
     </antcall>
  </target>

  <target name="GoogleChart.all">
      <antcall target="global.framework.${build.action}" >
          <param name="project.principal.class" value="er.googlechart.GCGoogleChart" />
          <param name="project.name" value="GoogleChart" />
          <param name="project.dir" value="Frameworks/Ajax/GoogleChart" />
          <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/Ajax" />
     </antcall>
  </target>

    <target name="ERCoolComponents.all">
      <antcall target="global.framework.${build.action}" >
          <param name="project.principal.class" value="er.coolcomponents.ERCoolComponents" />
          <param name="project.name" value="ERCoolComponents" />
          <param name="project.dir" value="Frameworks/Ajax/ERCoolComponents" />
          <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/Ajax" />
     </antcall>
    </target>

    <target name="ERJaxWS.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERJaxWS" />
            <param name="project.dir" value="Frameworks/Misc/ERJaxWS" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>

    <target name="EROpenID.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="EROpenID" />
            <param name="project.dir" value="Frameworks/Misc/EROpenID" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>

    <target name="ERPDFGeneration.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERPDFGeneration" />
            <param name="project.dir" value="Frameworks/Misc/ERPDFGeneration" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>

    <target name="ERJGroupsSynchronizer.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERJGroupsSynchronizer" />
            <param name="project.dir" value="Frameworks/EOF/ERJGroupsSynchronizer" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>

    <target name="WOLips.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="WOLips" />
            <param name="project.dir" value="Frameworks/Misc/WOLips" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/Ajax" />
       </antcall>
    </target>

    <target name="WOJRebel.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.wojrebel.WOJRebel" />
            <param name="project.name" value="WOJRebel" />
            <param name="project.dir" value="Frameworks/Misc/WOJRebel" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>

    <target name="ERExtensions.all" xmlns:artifact="antlib:org.apache.maven.artifact.ant">
        <path id="maven-ant-tasks.classpath" path="${basedir}/Build/lib/maven-ant-tasks-2.1.3.jar" />
        <typedef resource="org/apache/maven/artifact/ant/antlib.xml" uri="antlib:org.apache.maven.artifact.ant" classpathref="maven-ant-tasks.classpath" />

        <artifact:pom id="wonder-version" file="pom.xml" />
        <antcall target="global.framework.${build.action}" >
            <param name="project.version" value="${wonder-version.version}" />
            <param name="project.principal.class" value="er.extensions.ERXExtensions" />
            <param name="project.name" value="ERExtensions" />
            <param name="project.dir" value="Frameworks/Core/ERExtensions" />
            <!-- kind of cheating here...-->
            <param name="classes.exclude.0" value="${erx.class.exclude.0}" />
            <param name="classes.exclude.1" value="${erx.class.exclude.1}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.jars}/JavaWOExtensions" />
            <param name="test.className" value="er.extensions.ERExtensionsTest" />
        </antcall>
    </target>

    <target name="ERDirectToWeb.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.directtoweb.ERDirectToWeb" />
            <param name="project.name" value="ERDirectToWeb" />
            <param name="project.dir" value="Frameworks/Core/ERDirectToWeb" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/Ajax" />
        </antcall>
    </target>

    <target name="ERPrototypes.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.prototypes.ERPrototypes" />
            <param name="project.name" value="ERPrototypes" />
            <param name="project.dir" value="Frameworks/Core/ERPrototypes" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>

    <target name="ERJavaMail.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.javamail.ERJavaMail" />
            <param name="project.name" value="ERJavaMail" />
            <param name="project.dir" value="Frameworks/Core/ERJavaMail" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>

    <target name="ERChronic.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERChronic" />
            <param name="project.dir" value="Frameworks/Misc/ERChronic" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
            <param name="test.className" value="er.chronic.ChronicTestSuite" />
       </antcall>
    </target>

    <target name="ERCaching.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.caching.ERCaching" />
            <param name="project.name" value="ERCaching" />
            <param name="project.dir" value="Frameworks/EOF/ERCaching" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>

    <target name="WebService_Created.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.examples.erjaxws.Application" />
            <param name="project.name" value="WebService_Created" />
            <param name="project.dir" value="Examples/ERJaxWS/WebService_Created" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERJaxWS" />
        </antcall>
    </target>

    <target name="WebService_Imported.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.examples.erjaxws.Application" />
            <param name="project.name" value="WebService_Imported" />
            <param name="project.dir" value="Examples/ERJaxWS/WebService_Imported" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERJaxWS" />
        </antcall>
    </target>

    <target name="WebService_Stateful.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.examples.erjaxws.Application" />
            <param name="project.name" value="WebService_Stateful" />
            <param name="project.dir" value="Examples/ERJaxWS/WebService_Stateful" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERJaxWS" />
        </antcall>
    </target>

    <target name="ERXPartialBaseModel.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.name" value="ERXPartialBaseModel" />
            <param name="project.principal.class" value="" />
            <param name="project.dir" value="Examples/ERXPartials/ERXPartialBaseModel" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>

    <target name="ERXPartialsExampleModel.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.name" value="ERXPartialsExampleModel" />
            <param name="project.principal.class" value="" />
            <param name="project.dir" value="Examples/ERXPartials/ERXPartialsExampleModel" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERXPartialBaseModel" />
       </antcall>
    </target>

    <target name="ERXPartialsExampleApp.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.example.erxpartials.Application" />
            <param name="project.name" value="ERXPartialsExampleApp" />
            <param name="project.dir" value="Examples/ERXPartials/ERXPartialsExampleApp" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/ERXPartialBaseModel/ERXPartialBaseModel" />
            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
        </antcall>
    </target>

    <target name="ERXTest.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.erxtest.Application" />
            <param name="project.name" value="ERXTest" />
            <param name="project.dir" value="Tests/ERXTest" />
            <param name="wo.external.root.bundles"
                   value="${frameworks.wonder.core}/ERPrototypes/JavaDerbyAdaptor/JavaMemoryAdaptor/ERChronic/ExcelGenerator" />
        </antcall>
    </target>

    <target name="PluginTest.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.plugintest.Application" />
            <param name="project.name" value="PluginTest" />
            <param name="project.dir" value="Tests/PluginTest" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERPrototypes/DB2Plugin" />
        </antcall>
    </target>

    <target name="JavaNeo4JAdaptorTest.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.name" value="JavaNeo4JAdaptorTest" />
            <param name="project.dir" value="Tests/JavaNeo4JAdaptorTest" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/JavaNeo4JAdaptor" />
        </antcall>
    </target>

    <target name="LuceneExample.all">
        <antcall target="global.application.${build.action}">
            <param name="project.principal.class" value="er.lucenceadaptor.example.Application" />
            <param name="project.name" value="LuceneExample" />
            <param name="project.dir" value="Examples/Misc/LuceneExample" />
            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/JavaLuceneAdaptor" />
        </antcall>
    </target>

    <target name="ERIndexing.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERIndexing" />
            <param name="project.dir" value="Frameworks/EOF/ERIndexing" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERPrototypes" />
       </antcall>
    </target>
    
    <target name="ERIndexingExample.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.principal.class" value="er.indexing.example.Application" />
            <param name="project.name" value="ERIndexingExample" />
            <param name="project.dir" value="Examples/Misc/ERIndexingExample" />
            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/ERPrototypes/ERIndexing" />
       </antcall>
    </target>

    <target name="ERRestRouteExample.all" depends="examples.embed.check">
    	<property name="wonder.examples.embed.jars" value="false" />
        <antcall target="global.application.${build.action}" >
            <param name="project.principal.class" value="er.rest.example.Application" />
            <param name="project.name" value="ERRestRouteExample" />
            <param name="project.dir" value="Examples/Misc/ERRestRouteExample" />
            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.logic}/ERPrototypes/WOOgnl/Ajax/ERRest/JavaMemoryAdaptor" />
      		<param name="wo.external.root.bundles.embed" value="${wonder.examples.embed.jars}" />
      		<param name="wo.system.root.bundles.embed" value="${wonder.examples.embed.jars}" />            
       </antcall>
    </target>

    <target name="ERPlot.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.plot.ERPlot" />
            <param name="project.name" value="ERPlot" />
            <param name="project.dir" value="Frameworks/Reporting/ERPlot" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>
    
	<target name="ERJasperReports.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERJasperReports" />
            <param name="project.dir" value="Frameworks/Reporting/ERJasperReports" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>
    
	<target name="ERJasperReportsExample.all" depends="examples.embed.check">
    	<property name="wonder.examples.embed.jars" value="false" />
        <antcall target="global.application.${build.action}" >
            <param name="project.principal.class" value="er.jrexample.appserver.Application" />
            <param name="project.name" value="ERJasperReportsExample" />
            <param name="project.dir" value="Examples/Reporting/ERJasperReportsExample" />
            <param name="wo.system.root.bundles" value="${frameworks.system.core}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERJasperReports/ERPrototypes/WOOgnl/ERMoviesLogic/Ajax/ERTaggable/ERAttachment/ERCoolComponents/H2PlugIn" />
      		<param name="wo.external.root.bundles.embed" value="${wonder.examples.embed.jars}" />
      		<param name="wo.system.root.bundles.embed" value="${wonder.examples.embed.jars}" />
       </antcall>
    </target>

	<target name="ERPDFExamples.all" depends="examples.embed.check">
    	<property name="wonder.examples.embed.jars" value="false" />
        <antcall target="global.application.${build.action}" >
            <param name="project.principal.class" value="er.pdfexamples.Application" />
            <param name="project.name" value="ERPDFExamples" />
            <param name="project.dir" value="Examples/Reporting/ERPDFExamples" />
            <param name="wo.system.root.bundles" value="${frameworks.system.core}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERPDFGeneration" />
      		<param name="wo.external.root.bundles.embed" value="${wonder.examples.embed.jars}" />
      		<param name="wo.system.root.bundles.embed" value="${wonder.examples.embed.jars}" />     
       </antcall>
    </target>
    
	<target name="BackgroundTasks.all" depends="examples.embed.check">
    	<property name="wonder.examples.embed.jars" value="false" />
        <antcall target="global.application.${build.action}" >
            <param name="project.principal.class" value="wowodc.background.appserver.Application" />
            <param name="project.name" value="BackgroundTasks" />
            <param name="project.dir" value="Examples/Misc/BackgroundTasks" />
            <param name="wo.system.root.bundles" value="${frameworks.system.core}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERPrototypes/WOOgnl/ERCoolComponents/Ajax/MySQLPlugIn/H2PlugIn/ERRest" />
      		<param name="wo.external.root.bundles.embed" value="${wonder.examples.embed.jars}" />
      		<param name="wo.system.root.bundles.embed" value="${wonder.examples.embed.jars}" />            
       </antcall>
    </target>
    
	<target name="ERAttributeExtension.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.attributeextension.ERAttributeExtension" />
            <param name="project.name" value="ERAttributeExtension" />
            <param name="project.dir" value="Frameworks/EOF/ERAttributeExtension" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>

    <target name="ERExcelLook.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.directtoweb.excel.ERExcelLook" />
            <param name="project.name" value="ERExcelLook" />
            <param name="project.dir" value="Frameworks/Excel/ERExcelLook" />
            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}" />
       </antcall>
    </target>

    <target name="ERCoreBusinessLogic.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.corebusinesslogic.ERCoreBusinessLogic" />
            <param name="project.name" value="ERCoreBusinessLogic" />
            <param name="project.dir" value="Frameworks/BusinessLogic/ERCoreBusinessLogic" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/ERJavaMail" />
        </antcall>
    </target>

    <target name="ERChangeNotificationJMS.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.changenotification.ERCNNotificationCoordinator" />
            <param name="project.name" value="ERChangeNotificationJMS" />
            <param name="project.dir" value="Frameworks/EOF/ERChangeNotificationJMS" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>

    <target name="ERNeutralLook.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERNeutralLook" />
            <param name="project.dir" value="Frameworks/Core/ERNeutralLook" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.logic}" />
        </antcall>
    </target>

    <target name="BTBusinessLogic.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.bugtracker.BTBusinessLogic" />
            <param name="project.name" value="BTBusinessLogic" />
            <param name="project.dir" value="Frameworks/BusinessLogic/BTBusinessLogic" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.logic}/Ajax/BTBusinessLogic/DRGrouping/WRReporting/ERPlot/ERRest/ERAttachment/ERTaggable/DerbyPlugIn/PostgresqlPlugIn/ExcelGenerator/WOOgnl/ERCaptcha/ERSelenium/ERCalendar/ERJavaMail/ERExcelLook" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
        </antcall>
    </target>

    <target name="BugTracker.all" depends="examples.embed.check">
    	<property name="wonder.examples.embed.jars" value="false" />
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.bugtracker.Application" />
            <param name="project.name" value="BugTracker" />
            <param name="project.dir" value="Applications/BugTracker" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.logic}/Ajax/BTBusinessLogic/DRGrouping/WRReporting/ERPlot/ERRest/ERAttachment/ERTaggable/DerbyPlugIn/PostgresqlPlugIn/ExcelGenerator/WOOgnl/ERCaptcha/ERSelenium/ERCalendar/ERJavaMail/ERExcelLook" />
      		<param name="wo.external.root.bundles.embed" value="${wonder.examples.embed.jars}" />
      		<param name="wo.system.root.bundles.embed" value="${wonder.examples.embed.jars}" />            
        </antcall>
    </target>

    <target name="ERMailer.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.javamail.mailer.Application" />
            <param name="project.name" value="ERMailer" />
            <param name="project.dir" value="Applications/ERMailer" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.logic}/ERJavaMail" />
       </antcall>
    </target>

    <target name="Uber.all" depends="examples.embed.check">
    	<property name="wonder.examples.embed.jars" value="false" />
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.uber.Application" />
            <param name="project.name" value="Uber" />
            <param name="project.dir" value="Applications/Uber" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.logic}/WOOgnl/Ajax/ERRest/ERTaggable/ERChronic/ERJavaMail/ERAttachment/JavaMemoryAdaptor/H2PlugIn/WOLips" />
      		<param name="wo.external.root.bundles.embed" value="${wonder.examples.embed.jars}" />
      		<param name="wo.system.root.bundles.embed" value="${wonder.examples.embed.jars}" />            
       </antcall>
    </target>

    <target name="SecretPal.all" depends="examples.embed.check">
    	<property name="wonder.examples.embed.jars" value="false" />
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="com.secretpal.Application" />
            <param name="project.name" value="SecretPal" />
            <param name="project.dir" value="Applications/SecretPal" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.logic}/WOOgnl/Ajax/ERRest/ERTaggable/ERChronic/ERJavaMail/ERAttachment/JavaMemoryAdaptor/H2PlugIn/FrontBasePlugIn/WOLips/ERCaptcha/ERCoolComponents/ERModernDefaultSkin/ERModernLook/ERModernDirectToWeb" />
      		<param name="wo.external.root.bundles.embed" value="${wonder.examples.embed.jars}" />
      		<param name="wo.system.root.bundles.embed" value="${wonder.examples.embed.jars}" />            
       </antcall>
    </target>

    <target name="ERSeleniumExample.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.seleniumexample.Application" />
            <param name="project.name" value="ERSeleniumExample" />
            <param name="project.dir" value="Examples/Misc/ERSeleniumExample" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERSelenium" />
       </antcall>
    </target>

     <target name="TickTockMan.all">
         <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.ticktock.Application" />
            <param name="project.name" value="TickTockMan" />
            <param name="project.dir" value="Examples/Misc/TickTockMan" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/WOOgnl" />
       </antcall>
    </target>

     <target name="WOTested.all" depends="wotested.embed.check">
		<property name="wonder.wotested.embed.jars" value="false" />
         <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="org.ganymede.Application" />
            <param name="project.name" value="WOTested" />
            <param name="project.dir" value="Applications/WOTested" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/WOOgnl/PostgresqlPlugIn" />
      		<param name="wo.external.root.bundles.embed" value="${wonder.wotested.embed.jars}" />
      		<param name="wo.system.root.bundles.embed" value="${wonder.wotested.embed.jars}" />
       </antcall>
    </target>

    <target name="ERCayenneExample.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.cayenne.example.Application" />
            <param name="project.name" value="ERCayenneExample" />
            <param name="project.dir" value="Examples/Misc/ERCayenneExample" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/WOOgnl/ERCayenne/ERPrototypes" />
        </antcall>
    </target>

    <target name="ERDistributionExampleServer.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.distribution.example.server.Application" />
            <param name="project.name" value="ERDistributionExampleServer" />
            <param name="project.dir" value="Examples/Misc/ERDistributionExampleServer" />
            <param name="wo.system.root.bundles" value="${frameworks.system.core}/JavaEODistribution" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/WOOgnl/ERPrototypes/DerbyPlugIn/ERDistribution/ERDistributionExampleModel" />
        </antcall>
    </target>

     <target name="ERDistributionExampleClient.post.build">
        <delete includeemptydirs="true">
        	<fileset dir="${build.root}/${project.name}.woa/Contents/Frameworks/" includes="*/WebServerResources/**/*"/>
        </delete>
    </target>
    
    <target name="ERDistributionExampleClient.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.distribution.example.client.Application" />
            <param name="project.name" value="ERDistributionExampleClient" />
            <param name="project.dir" value="Examples/Misc/ERDistributionExampleClient" />
            <param name="wo.system.root.bundles" value="JavaFoundation/JavaEOAccess/JavaEOControl/JavaWebObjects/JavaXML/JavaEODistribution" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.jars}/ERExtensions/ERDistribution/ERDistributionExampleModel" />
      		<param name="wo.system.root.bundles.embed" value="true" />
      		<param name="wo.external.root.bundles.embed" value="true" />
      		<param name="after.build" value="ERDistributionExampleClient.post.build" />
        </antcall>
    </target>
    
    <target name="Movies.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.movies.Application" />
            <param name="project.name" value="Movies" />
            <param name="project.dir" value="Examples/Misc/Movies" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/WOOgnl/Ajax/ERRest/ERTaggable/ERChronic/ERMoviesLogic/ERAttachment/H2PlugIn" />
        </antcall>
    </target>	

    <target name="ERMovies.all" depends="examples.embed.check">
    	<property name="wonder.examples.embed.jars" value="false" />
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.examples.movies.Application" />
            <param name="project.name" value="ERMovies" />
            <param name="project.dir" value="Examples/D2W/ERMovies" />
            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/DerbyPlugIn/ERMoviesLogic/ERSelenium/ERAttachment/ERTaggable" />
      		<param name="wo.external.root.bundles.embed" value="${wonder.examples.embed.jars}" />
      		<param name="wo.system.root.bundles.embed" value="${wonder.examples.embed.jars}" />            
       </antcall>
    </target>
    
    <target name="TextSearchDemo.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.examples.textsearchdemo.Application" />
            <param name="project.name" value="TextSearchDemo" />
            <param name="project.dir" value="Examples/Misc/TextSearchDemo" />
            <param name="wo.system.root.bundles" value="${frameworks.system.core}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/H2PlugIn/ERMoviesLogic/ERTaggable/Ajax/ERIndexing" />
       </antcall>
    </target>    

    <target name="D2WComponentTour.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="Application" />
            <param name="project.name" value="D2WComponentTour" />
            <param name="project.dir" value="Examples/D2W/D2WComponentTour" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}" />
         </antcall>
    </target>

    <target name="ERComponentTour.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.examples.Application" />
            <param name="project.name" value="ERComponentTour" />
            <param name="project.dir" value="Examples/Misc/ERComponentTour" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERPlot/ExcelGenerator/ERCaptcha/GoogleChart" />
         </antcall>
    </target>

    <target name="WOPayPal.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.wopaypal.WOPayPal" />
            <param name="project.name" value="WOPayPal" />
            <param name="project.dir" value="Frameworks/BusinessLogic/WOPayPal" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>

    <target name="DRGrouping.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="DRGrouping" />
            <param name="project.dir" value="Frameworks/Reporting/DRGrouping" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/WOOgnl" />
        </antcall>
    </target>

    <target name="WRReporting.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="WRReporting" />
            <param name="project.dir" value="Frameworks/Reporting/WRReporting" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/WOOgnl/DRGrouping" />
        </antcall>
    </target>

    <target name="DocsByExample.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.reporting.examples.Application" />
            <param name="project.name" value="DocsByExample" />
            <param name="project.dir" value="Examples/Reporting/DocsByExample" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/WOOgnl/DRGrouping/WRReporting/DerbyPlugIn/ERMoviesLogic/ERAttachment/ERTaggable" />
        </antcall>
    </target>

    <target name="DynaReporter.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.reporting.examples.Application" />
            <param name="project.name" value="DynaReporter" />
            <param name="project.dir" value="Examples/Reporting/DynaReporter" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/WOOgnl/DRGrouping/WRReporting/DerbyPlugIn/ERMoviesLogic/ERAttachment/ERTaggable" />
        </antcall>
    </target>

    <target name="DRGroupingTest.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.grouping.examples.Application" />
            <param name="project.name" value="DRGroupingTest" />
            <param name="project.dir" value="Examples/Reporting/DRGroupingTest" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/WOOgnl/DRGrouping/WRReporting/DerbyPlugIn/ERMoviesLogic/ERAttachment/ERTaggable" />
        </antcall>
    </target>

    <target name="Validity.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="Validity" />
            <param name="project.dir" value="Frameworks/EOF/Validity" />
        </antcall>
    </target>

    <target name="specific.validity.application">
        <antcall target="global.application.build" />
            <move todir="${build.root}/ValidityModeler.woa/Contents/WebServerResources" flatten="true" includeEmptyDirs="no">
            <fileset dir="${build.root}/ValidityModeler.woa/Contents/WebServerResources" />
        </move>
    </target>

    <target name="ValidityModeler.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ValidityModeler" />
            <param name="project.dir" value="Archives/Applications/ValidityModeler" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/WOOgnl/Validity" />
        </antcall>
    </target>

    <target name="ValidityExample.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.validexample.Application" />
            <param name="project.name" value="ValidityExample" />
            <param name="project.dir" value="Examples/Misc/ValidityExample" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/WOOgnl/Validity/ERSelenium" />
        </antcall>
    </target>
	
    <target name="DevStudio.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="ag.kcmedia.Application" />
            <param name="project.name" value="DevStudio" />
            <param name="project.dir" value="Examples/Misc/DevStudio" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}" />
         </antcall>
    </target>

    <target name="ERCalendar.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERCalendar" />
            <param name="project.dir" value="Frameworks/Misc/ERCalendar" />
        </antcall>
    </target>

    <target name="ERCayenne.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.cayenne.CayennePrincipal" />
            <param name="project.name" value="ERCayenne" />
            <param name="project.dir" value="Frameworks/Misc/ERCayenne" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>
    
    <target name="ERDistribution.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.distribution.ERDistributionPrincipal" />
            <param name="project.name" value="ERDistribution" />
            <param name="project.dir" value="Frameworks/Misc/ERDistribution" />
            <param name="wo.system.root.bundles" value="${frameworks.system.core}/JavaEODistribution" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>

    <target name="ERDistributionExampleModel.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.name" value="ERDistributionExampleModel" />
            <param name="project.dir" value="Examples/Misc/ERDistributionExampleModel" />
            <param name="wo.system.root.bundles" value="${frameworks.system.core}/JavaEODistribution" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>
    
    <target name="ExcelGenerator.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ExcelGenerator" />
            <param name="project.dir" value="Frameworks/Excel/ExcelGenerator" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>

    <target name="EROpenIDExample.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="Application" />
            <param name="project.name" value="EROpenIDExample" />
            <param name="project.dir" value="Archives/Examples/EROpenIDExample" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/EROpenID" />
        </antcall>
    </target>

    <target name="JavaRESTAdaptorExample.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.restadaptorexample.Application" />
            <param name="project.name" value="JavaRESTAdaptorExample" />
            <param name="project.dir" value="Examples/Misc/JavaRESTAdaptorExample" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/JavaRESTAdaptor" />
        </antcall>
    </target>

    <target name="AjaxExample.all" depends="examples.embed.check">
    	<property name="wonder.examples.embed.jars" value="false" />
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="Application" />
            <param name="project.name" value="AjaxExample" />
            <param name="project.dir" value="Examples/Ajax/AjaxExample" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/Ajax/ERPrototypes/JavaMemoryAdaptor/ERSelenium" />
      		<param name="wo.external.root.bundles.embed" value="${wonder.examples.embed.jars}" />
      		<param name="wo.system.root.bundles.embed" value="${wonder.examples.embed.jars}" />            
        </antcall>
    </target>

    <target name="AjaxExample2.all" depends="examples.embed.check">
    	<property name="wonder.examples.embed.jars" value="false" />
	      <antcall target="global.application.${build.action}" >
	          <param name="project.type" value="application" />
	          <param name="project.principal.class" value="er.ajax.example2.Application" />
	          <param name="project.name" value="AjaxExample2" />
	          <param name="project.dir" value="Examples/Ajax/AjaxExample2" />
	
	          <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/Ajax/WOOgnl/WOLips/ERSelenium" />
      		<param name="wo.external.root.bundles.embed" value="${wonder.examples.embed.jars}" />
      		<param name="wo.system.root.bundles.embed" value="${wonder.examples.embed.jars}" />            
	      </antcall>
	  </target>

    <target name="ERIUIExample.all">
      <antcall target="global.application.${build.action}" >
          <param name="project.type" value="application" />
          <param name="project.principal.class" value="er.iui.example.Application" />
          <param name="project.name" value="ERIUIExample" />
          <param name="project.dir" value="Archives/Examples/ERIUIExample" />

          <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERIUI/Ajax/WOOgnl" />
      </antcall>
    </target>

    <target name="Ajax.pre.build">
      	<exec dir="Frameworks/Ajax/Ajax/Support" executable="/bin/sh" os="Mac OS X" >
            <arg line="compress.sh" />
        </exec>
    </target>

    <target name="Ajax.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.ajax.Ajax" />
            <param name="project.name" value="Ajax" />
            <param name="project.dir" value="Frameworks/Ajax/Ajax" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
      		<param name="before.build" value="Ajax.pre.build" />
        </antcall>
    </target>

    <target name="YUIExample.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="Application" />
            <param name="project.name" value="YUIExample" />
            <param name="project.dir" value="Examples/Ajax/YUIExample" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/Ajax/YUI" />
        </antcall>
    </target>

    <target name="YUI.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.type" value="framework" />
            <param name="project.principal.class" value="" />
            <param name="project.name" value="YUI" />
            <param name="project.dir" value="Frameworks/Ajax/YUI" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/Ajax" />
        </antcall>
    </target>

    <target name="AjaxLookExample.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="Application" />
            <param name="project.name" value="AjaxLookExample" />
            <param name="project.dir" value="Examples/Ajax/AjaxLookExample" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/Ajax/YUI/YUILook" />
        </antcall>
    </target>

    <target name="AjaxLook.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="AjaxLook" />
            <param name="project.dir" value="Frameworks/Ajax/AjaxLook" />
            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/Ajax/YUI" />
        </antcall>
    </target>
    
    <target name="ERJQuery.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERJQuery" />
            <param name="project.dir" value="Frameworks/Ajax/ERJQuery" />
            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}" />
        </antcall>
    </target>

    <target name="ERPrototaculous.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERPrototaculous" />
            <param name="project.dir" value="Frameworks/Ajax/ERPrototaculous" />
            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/Ajax" />
        </antcall>
    </target>

    <target name="ERDivaLook.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERDivaLook" />
            <param name="project.dir" value="Frameworks/Ajax/ERDivaLook" />
            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/Ajax/ERAttachment" />
        </antcall>
    </target>

    <target name="ERDivaLookExample.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="Application" />
            <param name="project.name" value="ERDivaLookExample" />
            <param name="project.dir" value="Archives/Examples/ERDivaLookExample" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/Ajax/ERDivaLook/ERPrototaculous/H2PlugIn/ERMoviesLogic/ERAttachment/ERTaggable" />
        </antcall>
    </target>

    <target name="ERDivaliteLook.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERDivaliteLook" />
            <param name="project.dir" value="Frameworks/Misc/ERDivaliteLook" />
            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/ERAttachment" />
        </antcall>
    </target>

    <target name="ERDivaliteExample.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.divalite.example.Application" />
            <param name="project.name" value="ERDivaliteExample" />
            <param name="project.dir" value="Archives/Examples/ERDivaliteExample" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/ERDivaliteLook/H2PlugIn/ERMoviesLogic/ERAttachment/ERTaggable" />
        </antcall>
    </target>
    
    <target name="ERModernMoviesDemo.all" depends="examples.embed.check">
    	<property name="wonder.examples.embed.jars" value="false" />
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.modern.movies.demo.Application" />
            <param name="project.name" value="ERModernMoviesDemo" />
            <param name="project.dir" value="Examples/D2W/ERModernMoviesDemo" />

            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/Ajax/ERModernLook/ERModernDirectToWeb/ERModernDefaultSkin/H2PlugIn/ERMoviesLogic/ERAttachment/ERTaggable" />
      		<param name="wo.external.root.bundles.embed" value="${wonder.examples.embed.jars}" />
      		<param name="wo.system.root.bundles.embed" value="${wonder.examples.embed.jars}" />            
        </antcall>
    </target>

    <target name="ERModernLook.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERModernLook" />
            <param name="project.dir" value="Frameworks/D2W/ERModernLook" />
            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/Ajax/ERModernDirectToWeb" />
        </antcall>
    </target>
    
    <target name="ERModernDirectToWeb.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERModernDirectToWeb" />
            <param name="project.dir" value="Frameworks/D2W/ERModernDirectToWeb" />
            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/Ajax/ERCoolComponents" />
        </antcall>
    </target>
    
    <target name="ERModernDefaultSkin.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERModernDefaultSkin" />
            <param name="project.dir" value="Frameworks/D2W/ERModernDefaultSkin" />
            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}" />
        </antcall>
    </target>

    <target name="ERIMAdaptor.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERIMAdaptor" />
            <param name="project.dir" value="Frameworks/WOAdaptors/ERIMAdaptor" />
            <param name = "compiler.target" value = "1.5" />
            <param name = "compiler.source" value = "1.5" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>
    
    <target name="ERWOAdaptor.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERWOAdaptor" />
            <param name="project.dir" value="Frameworks/WOAdaptors/ERWOAdaptor" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>
    
    <target name="ERWebSocketExample.all">
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.websocketexample.Application" />
            <param name="project.name" value="ERWebSocketExample" />
            <param name="project.dir" value="Examples/Misc/ERWebSocketExample" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERWOAdaptor" />
        </antcall>
    </target>

    <target name="JavaMemoryAdaptor.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.customInfo.plist" value="&lt;key&gt;EOAdaptorClassName&lt;/key&gt;&lt;string&gt;er.memoryadaptor.ERMemoryAdaptor&lt;/string&gt;"/>
            <param name="project.name" value="JavaMemoryAdaptor" />
            <param name="project.dir" value="Frameworks/EOAdaptors/JavaMemoryAdaptor" />
            <param name = "compiler.target" value = "1.5" />
            <param name = "compiler.source" value = "1.5" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>

    <target name="JavaNeo4JAdaptor.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.customInfo.plist" value="&lt;key&gt;EOAdaptorClassName&lt;/key&gt;&lt;string&gt;er.neo4jadaptor.Neo4JAdaptor&lt;/string&gt;"/>
            <param name="project.name" value="JavaNeo4JAdaptor" />
            <param name="project.dir" value="Frameworks/EOAdaptors/JavaNeo4JAdaptor" />
            <param name = "compiler.target" value = "1.5" />
            <param name = "compiler.source" value = "1.5" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>    

    <target name="JavaLuceneAdaptor.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.customInfo.plist" value="&lt;key&gt;EOAdaptorClassName&lt;/key&gt;&lt;string&gt;er.luceneadaptor.ERLuceneAdaptor&lt;/string&gt;"/>
            <param name="project.name" value="JavaLuceneAdaptor" />
            <param name="project.dir" value="Frameworks/EOAdaptors/JavaLuceneAdaptor" />
            <param name = "compiler.target" value = "1.5" />
            <param name = "compiler.source" value = "1.5" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERJaxWS" />
        </antcall>
    </target>   

    <target name="JavaFSAdaptor.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.customInfo.plist" value="&lt;key&gt;EOAdaptorClassName&lt;/key&gt;&lt;string&gt;er.fsadaptor.FSAdaptor&lt;/string&gt;"/>
            <param name="project.name" value="JavaFSAdaptor" />
            <param name="project.dir" value="Frameworks/EOAdaptors/JavaFSAdaptor" />
            <param name = "compiler.target" value = "1.5" />
            <param name = "compiler.source" value = "1.5" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>

    <target name="JavaRESTAdaptor.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.customInfo.plist" value="&lt;key&gt;EOAdaptorClassName&lt;/key&gt;&lt;string&gt;er.restadaptor.ERRESTAdaptor&lt;/string&gt;"/>
            <param name="project.name" value="JavaRESTAdaptor" />
            <param name="project.dir" value="Frameworks/EOAdaptors/JavaRESTAdaptor" />
            <param name = "compiler.target" value = "1.5" />
            <param name = "compiler.source" value = "1.5" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>

    <target name="JavaERJDBCAdaptor.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.customInfo.plist" value="&lt;key&gt;EOAdaptorClassName&lt;/key&gt;&lt;string&gt;er.jdbcadaptor.ERJDBCAdaptor&lt;/string&gt;"/>
            <param name="project.name" value="JavaERJDBCAdaptor" />
            <param name="project.dir" value="Frameworks/EOAdaptors/JavaERJDBCAdaptor" />
            <param name = "compiler.target" value = "1.5" />
            <param name = "compiler.source" value = "1.5" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>

    <target name="ERWorkerChannel.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERWorkerChannel" />
            <param name="project.dir" value="Frameworks/Misc/ERWorkerChannel" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>
	
	<target name="PostgresqlPlugIn.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="com.webobjects.jdbcadaptor.PostgresqlPlugIn" />
            <param name="project.name" value="PostgresqlPlugIn" />
            <param name="project.dir" value="Frameworks/PlugIns/PostgresqlPlugIn" />
        </antcall>
    </target>

    <target name="DerbyPlugIn.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="com.webobjects.jdbcadaptor.DerbyPlugIn" />
            <param name="project.name" value="DerbyPlugIn" />
            <param name="project.dir" value="Frameworks/PlugIns/DerbyPlugIn" />
        </antcall>
    </target>

    <target name="FrontBasePlugIn.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="com.frontbase.FrontBasePlugInPrincipal" />
            <param name="project.name" value="FrontBasePlugIn" />
            <param name="project.dir" value="Frameworks/PlugIns/FrontBasePlugIn" />
        </antcall>
    </target>

	<target name="H2PlugIn.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.h2.ERH2PlugInPrincipal" />
            <param name="project.name" value="H2PlugIn" />
            <param name="project.dir" value="Frameworks/PlugIns/H2PlugIn" />
        </antcall>
    </target>

	<target name="DB2PlugIn.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="com.webobjects.jdbcadaptor.DB2PlugIn" />
            <param name="project.name" value="DB2PlugIn" />
            <param name="project.dir" value="Frameworks/PlugIns/DB2PlugIn" />
        </antcall>
    </target>

    <target name="MySQLPlugIn.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="com.webobjects.jdbcadaptor.MySQLPlugIn" />
            <param name="project.name" value="MySQLPlugIn" />
            <param name="project.dir" value="Frameworks/PlugIns/MySQLPlugIn" />
        </antcall>
    </target>

    <target name="MooTools.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.ajax.Ajax" />
            <param name="project.name" value="MooTools" />
            <param name="project.dir" value="Frameworks/Ajax/MooTools" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/Ajax/ERAttachment" />
        </antcall>
    </target>

    <target name="ERMootoolsDirectToWeb.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERMootoolsDirectToWeb" />
            <param name="project.dir" value="Frameworks/D2W/ERMootoolsDirectToWeb" />
            <param name="wo.system.root.bundles" value="${frameworks.system.d2w}" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.d2w}/Ajax/ERModernDirectToWeb" />
        </antcall>
    </target>

    <target name="MooToolsExample.all" depends="examples.embed.check">
    	<property name="wonder.examples.embed.jars" value="false" />
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.ajax.mootools.example.app.Application" />
            <param name="project.name" value="MooToolsExample" />
            <param name="project.dir" value="Examples/Ajax/MooToolsExample" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/Ajax/ERPrototypes/JavaMemoryAdaptor/MooTools" />
      		<param name="wo.external.root.bundles.embed" value="${wonder.examples.embed.jars}" />
      		<param name="wo.system.root.bundles.embed" value="${wonder.examples.embed.jars}" />            
        </antcall>
    </target>    

    <target name="ERJQueryMobile.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.jquerymobile.ERJQueryMobile" />
            <param name="project.name" value="ERJQueryMobile" />
            <param name="project.dir" value="Frameworks/Ajax/ERJQueryMobile" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/Ajax/ERAttachment" />
        </antcall>
    </target>    

    <target name="JqueryMobileExample.all" depends="examples.embed.check">
    	<property name="wonder.examples.embed.jars" value="false" />
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="er.jquerymobile.exampleapp.Application" />
            <param name="project.name" value="JqueryMobileExample" />
            <param name="project.dir" value="Examples/Ajax/JqueryMobileExample" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERJQueryMobile/ERMoviesLogic" />
      		<param name="wo.external.root.bundles.embed" value="${wonder.examples.embed.jars}" />
      		<param name="wo.system.root.bundles.embed" value="${wonder.examples.embed.jars}" />            
        </antcall>
    </target>

    <target name="ERJQMobile.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.jqm.ERJQMobile" />
            <param name="project.name" value="ERJQMobile" />
            <param name="project.dir" value="Frameworks/Ajax/ERJQMobile" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/Ajax" />
        </antcall>
    </target>    

    <target name="ERQuartzScheduler.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERQuartzScheduler" />
            <param name="project.dir" value="Frameworks/Misc/ERQuartzScheduler" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERJavaMail" />
        </antcall>
    </target>        

    <target name="ERXiss.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERXiss" />
            <param name="project.dir" value="Frameworks/Misc/ERXiss" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>
    
    <target name="deployment.embed.check" if="deployment.standalone">
        <property name="wonder.deployment.embed.jars" value="true" />
    </target>
    
	<target name="wotested.embed.check" if="wotested.standalone">
        <property name="wonder.wotested.embed.jars" value="true" />
    </target>
    
    <target name="examples.embed.check" if="examples.standalone">
        <property name="wonder.examples.embed.jars" value="true" />
    </target>

    <target name="JavaMonitor.all" depends="deployment.embed.check">
        <property name="wonder.deployment.embed.jars" value="false" />
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="com.webobjects.monitor.application.Application" />
            <param name="project.name" value="JavaMonitor" />
            <param name="project.dir" value="Applications/JavaMonitor" />
      		<param name="wo.external.root.bundles" value="ERJars/ERExtensions/ERRest/JavaWOExtensions/JavaMonitorFramework/Ajax" />
      		<param name="wo.external.root.bundles.embed" value="${wonder.deployment.embed.jars}" />
      		<param name="wo.system.root.bundles.embed" value="${wonder.deployment.embed.jars}" />
        </antcall>
    </target>

     <target name="wotaskd.post.build">
        <chmod file="${build.root}/${project.name}.woa/Contents/Resources/SpawnOfWotaskd.sh" perm="ugo+rx"/>
        <chmod file="${build.root}/${project.name}.woa/Contents/Resources/javawoservice.sh" perm="ugo+rx"/>
    </target>

    <target name="wotaskd.all" depends="deployment.embed.check">
        <property name="wonder.deployment.embed.jars" value="false" />
        <antcall target="global.application.${build.action}" >
            <param name="project.type" value="application" />
            <param name="project.principal.class" value="com.webobjects.monitor.wotaskd.Application" />
            <param name="project.name" value="wotaskd" />
            <param name="project.dir" value="Applications/wotaskd" />
      		<param name="wo.external.root.bundles" value="ERJars/ERExtensions/JavaWOExtensions/JavaMonitorFramework/ERRest" />
      		<param name="wo.external.root.bundles.embed" value="${wonder.deployment.embed.jars}" />
      		<param name="wo.system.root.bundles.embed" value="${wonder.deployment.embed.jars}" />
      		<param name="after.build" value="wotaskd.post.build" />
        </antcall>
    </target>

    <target name="JavaMonitorFramework.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="JavaMonitorFramework" />
            <param name="project.dir" value="Frameworks/Misc/JavaMonitorFramework" />

            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
        </antcall>
    </target>

    <target name="SnapshotExplorer.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="SnapshotExplorer" />
            <param name="project.dir" value="Frameworks/Misc/SnapshotExplorer" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}/ERRest" />
       </antcall>
    </target>

    <target name="ERPersistentSessionStorage.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="er.persistentsessionstorage.ERPersistentSessionStorage" />
            <param name="project.name" value="ERPersistentSessionStorage" />
            <param name="project.dir" value="Frameworks/Misc/ERPersistentSessionStorage" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>
    
    <target name="ERFirebug.all">
        <antcall target="global.framework.${build.action}" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERFirebug" />
            <param name="project.dir" value="Frameworks/Misc/ERFirebug" />
            <param name="wo.external.root.bundles" value="${frameworks.wonder.core}" />
       </antcall>
    </target>    
	
    <!--
        The targets here correspond to a top-level directory, split into frameworks, apps and examples
        to add your own, add a target definition above and choose the correct group below
     -->

    <target name="common.frameworks.all" depends="ERJars.all, JavaWOExtensions.all, ERExtensions.all, Ajax.all, ERDirectToWeb.all, ERNeutralLook.all, ERSelenium.all, WOOgnl.all, ERPrototypes.all, ERPlot.all, ERIndexing.all, ERChronic.all, ERCaptcha.all, ERProfiling.all, EROpenID.all, ERJaxWS.all, ERPDFGeneration.all, ERJGroupsSynchronizer.all, ERRest.all, ERAttachment.all, ERTaggable.all, ERJavaMail.all, ERCoreBusinessLogic.all, ERChangeNotificationJMS.all, ERCalendar.all, ERExcelLook.all, BTBusinessLogic.all, JavaMemoryAdaptor.all, JavaNeo4JAdaptor.all, JavaLuceneAdaptor.all, JavaFSAdaptor.all, JavaERJDBCAdaptor.all, WOLips.all, WOJRebel.all, ERMoviesLogic.all, SnapshotExplorer.all, ERJasperReports.all, ERAttributeExtension.all, ERWOAdaptor.all, ERCayenne.all, ERCayenne.all, ERDistribution.all, MooTools.all, ERJQueryMobile.all, ERJQMobile.all, ERPersistentSessionStorage.all, ERQuartzScheduler.all, ERXiss.all, ERFirebug.all, ERXPartialBaseModel.all, ERXPartialsExampleModel.all" />

    <target name="common.applications.all" depends="BugTracker.all, ERMailer.all, Uber.all, SecretPal.all, ERXTest.all, PluginTest.all, WOTested.all" />
    
	<target name="common.examples.all" depends="ERSeleniumExample.all, ERIndexingExample.all, ERMovies.all, D2WComponentTour.all, AjaxExample.all, AjaxExample2.all, TickTockMan.all, ERComponentTour.all, ERRestRouteExample.all, Movies.all, ERWebSocketExample.all, ERJasperReportsExample.all, BackgroundTasks.all, ERCayenneExample.all, ERDistributionExampleModel.all, ERDistributionExampleServer.all, ERDistributionExampleClient.all, MooToolsExample.all, ERPDFExamples.all, JqueryMobileExample.all, LuceneExample.all, TextSearchDemo.all, ERXPartialsExampleApp.all, WebService_Created.all, WebService_Imported.all, WebService_Stateful.all" />

    <target name="dynareporting.frameworks.all" depends="DRGrouping.all, WRReporting.all" />
    <target name="dynareporting.examples.all" depends="DocsByExample.all, DynaReporter.all" />

    <target name="excelgeneration.frameworks.all" depends="ExcelGenerator.all" />

    <target name="ajax.frameworks.all" depends="GoogleChart.all, ERCoolComponents.all, ERJQuery.all, ERJQueryMobile.all, ERJQMobile.all, ERPrototaculous.all, ERModernDirectToWeb.all, ERModernLook.all, ERModernDefaultSkin.all, ERMootoolsDirectToWeb.all" />
    <target name="ajax.examples.all" depends="AjaxExample.all, AjaxExample2.all, ERModernMoviesDemo.all" />

    <target name="plugins.all" depends="PostgresqlPlugIn.all,FrontBasePlugIn.all,DerbyPlugIn.all,EROraclePlugIn.all,H2PlugIn.all,MySQLPlugIn.all,DB2PlugIn.all" />

    <target name="validity.frameworks.all" depends="Validity.all" />
    <target name="validity.applications.all" depends="ValidityModeler.all" />
    <target name="validity.examples.all" depends="ValidityExample.all" />

    <target name="paypal.frameworks.all" depends="WOPayPal.all" />
    <target name="woadaptors.all" depends="ERIMAdaptor.all, ERWOAdaptor.all" />
    <target name="experimental.all" depends="DevStudio.all" />

    <target name="_frameworks.all" depends="common.frameworks.all, excelgeneration.frameworks.all, ajax.frameworks.all, woadaptors.all, plugins.all, paypal.frameworks.all, dynareporting.frameworks.all, woadaptors.all, JavaMonitorFramework.all">
     </target>

    <target name="patch.frameworks.5431">
       <property name="erx.class.exclude.0" value="com/webobjects/foundation/*.*" />
       <property name="include.source" value="true" />
       <antcall target="_frameworks.all">
	</antcall>
    </target>

    <target name="patch.frameworks.54">
       <property name="include.source" value="true" />
       <antcall target="_frameworks.all" />
    </target>

    <target name="patch.frameworks.53">
       <property name="include.source" value="true" />
       <antcall target="_frameworks.all" />
    </target>

     <target name="frameworks.all">
        <antcall target="patch.frameworks.${wonder.patch}" />
     </target>

    <target name="applications.all" depends="common.applications.all, JavaMonitor.all, wotaskd.all"/>
    <target name="examples.all" depends="common.examples.all, ajax.examples.all"/>
    <target name="tests.all" depends="ERXTest.all, PluginTest.all"/> <!-- TODO include ERRestTest, TestAdaptor, JavaNeo4JAdaptorTest.all -->
    <target name="archives.frameworks.all" depends="YUI.all, validity.frameworks.all, JavaRESTAdaptor.all, ERWorkerChannel.all, AjaxLook.all, ERIUI.all, ERCaching.all, ERDivaLook.all, ERDivaliteLook.all" />
    <target name="archives.examples.all" depends="YUIExample.all, ERIUIExample.all, ERDivaLookExample.all, JavaRESTAdaptorExample.all, ERDivaliteExample.all, DRGroupingTest.all, DevStudio.all, dynareporting.examples.all, AjaxLookExample.all, validity.applications.all, validity.examples.all, EROpenIDExample.all " />

    <target name="all.run" depends="frameworks.all, applications.all, examples.all"/>

    <target name="dist">
        <!-- do dist target on known frameworks -->
        <antcall target="all.run" >
            <param name="dist.base" value="${dist.base}" />
            <param name="project.version" value="${project.version}" />
            <param name="dist.dir" value="${dist.base}/wonder-${project.version}"/>
            <param name="build.action" value="dist" />
        </antcall>

        <!-- copy the whole source to src -->
        <copy todir="${dist.base}/Wonder-src-${project.version}"
                includeEmptyDirs="false" preservelastmodified="true">
            <fileset dir=".">
                <include name="**/*" />
                <exclude name="**/Roots/**" />
                <exclude name="**/null*" />
                <exclude name="**/.git/**" />
                <exclude name="**/CVS/*" />
             	<exclude name="**/dist/**"/>
             	<exclude name="**/bin/**"/>
             	<exclude name="**/build/**"/>
             	<include name="**/Build/build/**"/>
             	<exclude name="**/target/**"/>
            </fileset>
        </copy>

        <tar tarfile="${dist.base}/Wonder-src-${project.version}.tar" longfile="gnu">
            <tarfileset dir="${dist.base}/Wonder-src-${project.version}">
            </tarfileset>
        </tar>

        <gzip src="${dist.base}/Wonder-src-${project.version}.tar"
            zipfile="${dist.base}/Wonder-src-${project.version}.tgz"/>

        <delete file="${dist.base}/Wonder-src-${project.version}.tar"/>
        <!-- zip destfile="${dist.base}/Wonder-${project.version}.zip"
            basedir="${dist.base}/wonder-${project.version}"
            excludes="**/CVS/*, **/dist/**" / -->
    </target>


    <target name="patch.5431">
        <property name="erx.class.exclude.0" value="com/webobjects/foundation/*.*" />
        <property name="include.source" value="true" />
        <antcall target="all.run" >
            <param name="build.action" value="build" />
        </antcall>
    </target>

    <target name="patch.54">
        <property name="erx.class.exclude.0" value="com/webobjects/foundation/*.*" />
        <property name="include.source" value="true" />
        <antcall target="all.run" >
            <param name="build.action" value="build" />
        </antcall>
    </target>

    <target name="patch.53">
        <property name="include.source" value="true" />
        <antcall target="all.run" >
            <param name="build.action" value="build" />
        </antcall>
    </target>

    <target name="build">
        <antcall target="patch.${wonder.patch}" ></antcall>
    </target>

    <target name="install">
        <antcall target="all.run" >
            <param name="build.action" value="install" />
        </antcall>
    </target>

    <target name="web">
        <antcall target="all.run" >
            <param name="build.action" value="web" />
        </antcall>
    </target>

    <target name="_tests.run">
        <antcall target="ERExtensions.all"><param name="build.action" value="test" /></antcall>
        <antcall target="ERChronic.all"><param name="build.action" value="test" /></antcall>
    </target>

    <target name="thrash">
        <antcall target="thrash.run" />
    </target>

    <target name="thrash.all">
        <antcall target="thrash.run"><param name="thrash.scheme" value="scheme:SimpleFetchTest::0-5,2-5,3-5" /></antcall>
        <antcall target="thrash.run"><param name="thrash.scheme" value="scheme:SimpleInsertTest::0-5,2-5,5-10" /></antcall>
    </target>

    <target name="tests.run" depends="global.environment">
        <condition property="test.target" value="test.app.found" else="no.app.found">
            <available file="${build.root}/ERXTest.woa/ERXTest" property="test.target" />
        </condition>
        <antcall target="${test.target}" />
    </target>

    <target name="no.app.found">
        <echo>
            The ERXTest.woa application must be built and installed in the "build.root" directory in order to run tests.
            Please try "ant applications" and then try again.
        </echo>
    </target>

    <target name="test.app.found">

        <property name="fRJ" value="frameworks/Resources/Java" />

        <property file="${user.home}${file.separator}Library${file.separator}wobuild.properties"/>

        <java classname="er.erxtest.Application" fork="true" failonerror="true" maxmemory="128m" dir="${build.root}/ERXTest.woa">
            <arg value="-DWORootDirectory=/System" />
            <arg value="-DWOLocalRootDirectory=" />
            <arg value="-DWOUserDirectory=${build.root}/ERXTest.woa" />
            <arg value="-Der.extensions.defaultModelGroupClassName=er.extensions.eof.SortOfModelGroup" />
            <arg value="-Dwo.test.emailAddress=${wo.test.emailAddress}" />
            <arg value="-Dwo.test.extra=${wo.test.extra}" />

            <classpath>
                <pathelement location="${build.root}/ERXTest.woa/Contents/Resources/Java/ERXTest.jar" />
                <pathelement location="${build.root}/ERExtensions.${fRJ}/ERExtensions.jar" />
                <pathelement location="${build.root}/ERChronic.${fRJ}/ERChronic.jar" />
                <pathelement location="${build.root}/ERJars.${fRJ}/${framework.erjars.commons.lang}" />
                <pathelement location="${build.root}/ERJars.${fRJ}/ERFoundation.jar" />
                <pathelement location="${build.root}/ERJars.${fRJ}/ERJars.jar" />
                <pathelement location="${build.root}/ERJars.${fRJ}/ERWebObjects.jar" />
                <pathelement location="${build.root}/ERJars.${fRJ}/erxservletadaptor.jar" />
                <pathelement location="${build.root}/ERJars.${fRJ}/${framework.erjars.icu4j}" />
                <pathelement location="${build.root}/ERJars.${fRJ}/${framework.erjars.joda}" />
                <pathelement location="${build.root}/ERJars.${fRJ}/${framework.erjars.junit}" />
                <pathelement location="${build.root}/ERJars.${fRJ}/${framework.erjars.log4j}" />
                <pathelement location="${build.root}/ERJars.${fRJ}/${framework.erjars.ognl}" />
                <pathelement location="${build.root}/ERJars.${fRJ}/${framework.erjars.slf4j.api}" />
                <pathelement location="${build.root}/ERJars.${fRJ}/i${framework.erjars.slf4j.log4j12}" />
                <pathelement location="${build.root}/ERPrototypes.${fRJ}/ERPrototypes.jar" />
                <pathelement location="${build.root}/JavaMemoryAdaptor.${fRJ}/JavaMemoryAdaptor.jar" />
                <pathelement location="${build.root}/JavaWOExtensions.${fRJ}/JavaWOExtensions.jar" />
                <pathelement location="${wo.system.frameworks}/JavaEOAccess.${fRJ}/javaeoaccess.jar" />
                <pathelement location="${wo.system.frameworks}/JavaEOControl.${fRJ}/javaeocontrol.jar" />
                <pathelement location="${wo.system.frameworks}/JavaFoundation.${fRJ}/javafoundation.jar" />
                <pathelement location="${wo.system.frameworks}/JavaJDBCAdaptor.${fRJ}/javajdbcadaptor.jar" />
                <pathelement location="${wo.system.frameworks}/JavaWOJSPServlet.${fRJ}/javawojspservlet.jar" />
                <pathelement location="${wo.system.frameworks}/JavaWebObjects.${fRJ}/javawebobjects.jar" />
                <pathelement location="${wo.system.frameworks}/JavaXML.${fRJ}/javaxml.jar" />
            </classpath>
        </java>
    </target>

    <target name="clean">
        <antcall target="all.run" >
            <param name="build.action" value="clean" />
        </antcall>
    </target>

    <target name="all" depends="build, install, web" />
</project>
